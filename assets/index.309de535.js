var e=Object.defineProperty,t=Object.defineProperties,i=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,a=(t,i,n)=>i in t?e(t,i,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[i]=n,r=(e,t)=>{for(var i in t||(t={}))o.call(t,i)&&a(e,i,t[i]);if(n)for(var i of n(t))s.call(t,i)&&a(e,i,t[i]);return e},l=(e,n)=>t(e,i(n));import{c,a as d,b as p,n as u,o as h,e as w,d as m,p as f,f as g,g as x,h as b,i as A,r as y,w as k,v as C,j as v,t as S,k as F,l as P,m as D,q as E,s as M,F as R,u as z,x as I,y as T,z as j,A as $,T as B,B as U,C as W,D as N,E as H,G as O}from"./vendor.957100f5.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const i of e)if("childList"===i.type)for(const e of i.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const L=e=>toString.call(e).match(/\s([a-zA-Z]+)/)[1],Q=(e,t)=>"Object"===L(e)?Object.keys(e).forEach((i=>t(i,e[i]))):e.forEach(t);function q(e){e=Number(e);let t=Math.floor(e/3600),i=Math.floor(e%3600/60),n=Math.floor(e%3600%60);return(t>0?K(t,2)+":":"")+(i>0?K(i,2)+":":"00:")+(n>0?K(n,2):"00")}function K(e,t){return e.toLocaleString("en-US",{minimumIntegerDigits:t,useGrouping:!1})}const G=(...e)=>{const t={};return e.forEach((e=>{"string"==typeof e?t[e]={}:t[e[0]]={default:e[1]}})),{inject:t}},V=e=>void 0===e?{required:!0}:{default:e},X=e=>({props:e});X.str=(e="")=>r({type:String},V(e)),X.bool=(e=!1)=>r({type:Boolean},V(e)),X.num=(e=0)=>r({type:Number},V(e)),X.obj=(e=(()=>({})),t)=>r({validator:t||(e=>"Object"===L(e))},V(e)),X.arr=(e=(()=>[]))=>r({validator:e=>"Array"===L(e)},V(e)),X.oneOf=(e,t)=>r({validator:t=>e.includes(t)},V(t)),X.any=e=>r({},V(e)),X.func=e=>r({type:Function},V(e));const Y=(e,t)=>`rgba(${("number"==typeof e?[e,e,e]:e).join(",")}, ${t})`,Z=e=>"number"==typeof e||e===`${e}`?`${e}px`:e;const J=l(r({},G("$wm","$snd")),{mounted(){this.start()},computed:{isFullScreen:()=>!!window.document.fullscreenElement},methods:{requestFullscreen(){const e=document.documentElement,t=e.requestFullscreen||e.webkitRequestFullscreen||e.msRequestFullscreen;t&&t.call(e)},start(){this.$wm.startWindowManager(),this.$snd.playSound("/win7/assets/startup.3d9908ba.wav")},startFullscreen(){this.requestFullscreen(),this.start()}},style:({className:e})=>[e("welcomePage",{position:"fixed",height:"100%",width:"100%",overflow:"hidden",left:0,top:0,background:'url("/win7/assets/login.f538d71e.png")',backgroundSize:"cover",backgroundPosition:"bottom",display:"flex",alignItems:"center",justifyContent:"center","& > button":{border:`solid 1px ${Y(0,.4)}`,height:"48px",cursor:"pointer",padding:"0 30px",borderRadius:"8px",margin:"5px",color:Y(255,1),textShadow:`0 0 3px ${Y(0,1)}`,background:`linear-gradient(180deg,\n            ${Y([165,230,255],1)} 0%,\n            ${Y([125,200,240],1)} 15%,\n            ${Y([60,168,230],1)} 48%,\n            ${Y([44,140,200],1)} 52%,\n            ${Y([47,158,220],1)} 80%,\n            ${Y([115,198,238],1)} 100%\n          )`,transition:"filter 0.2s","&:hover, &:focus":{filter:"brightness(1.1)"},"&:active":{filter:"brightness(0.95)"}}})]});J.render=function(e,t,i,n,o,s){return h(),c("div",{class:u(e.$style.welcomePage)},[s.isFullScreen?d("",!0):(h(),c("button",{key:0,onClick:t[0]||(t[0]=(...e)=>s.startFullscreen&&s.startFullscreen(...e))}," Start Fullscreen ")),p("button",{onClick:t[1]||(t[1]=(...e)=>s.start&&s.start(...e))}," Start Normally ")],2)};const _=e=>Array.isArray(e)?e:[e],ee=e=>Array.isArray(e)?e:e.split(","),te=(e,t,i,n=!1)=>{const o=_(e),s=ee(t);o.forEach((e=>{s.forEach((t=>{e.addEventListener(t,i,n)}))}))},ie=(e,t,i,n=!1)=>{const o=_(e),s=ee(t);o.forEach((e=>{s.forEach((t=>{e.removeEventListener(t,i,n)}))}))},ne={passive:!0,capture:!1},oe={passive:!0,capture:!0},se=e=>({top:e.clientY,left:e.clientX}),ae=(e,t)=>({top:e.top-t.top,left:e.left-t.left});var re=(e=null,t,i,n)=>{let o={};const s=e=>{const t=se(e),n=ae(t,o);i(n,t)},a=e=>{const t=se(e),i=ae(t,o);n(i,t),ie(document.body,"pointermove",s,oe),ie(document.body,"pointerup",a,oe)},r=e=>{if(0!==e.button)return;o=se(e);!1!==t(o)&&(te(document.body,"pointermove",s,oe),te(document.body,"pointerup",a,oe))};return te(e,"pointerdown",r,ne),{cancelMove:()=>{ie(document.body,"pointermove",s,oe),ie(document.body,"pointerup",a,oe)},stop:()=>{ie(e,"pointerdown",r,ne),ie(document.body,"pointermove",s,oe),ie(document.body,"pointerup",a,oe)}}};const le={},ce=function(e,t){return t&&0!==t.length?Promise.all(t.map((e=>{if((e=`/win7/${e}`)in le)return;le[e]=!0;const t=e.endsWith(".css"),i=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${i}`))return;const n=document.createElement("link");return n.rel=t?"stylesheet":"modulepreload",t||(n.as="script",n.crossOrigin=""),n.href=e,document.head.appendChild(n),t?new Promise(((e,t)=>{n.addEventListener("load",e),n.addEventListener("error",t)})):void 0}))).then((()=>e())):e()};const de=new w.exports.EventEmitter2({wildcard:!0});let pe={};const ue=m.exports.BFSRequire("buffer").Buffer;async function he(){pe=await new Promise(((e,t)=>{m.exports.configure({fs:"MountableFileSystem",options:{"/C:":{fs:"IndexedDB",options:{storeName:"PartitionC"}},"/D:":{fs:"IndexedDB",options:{storeName:"PartitionD"}}}},(function(i){i&&(console.error(i),t(i));const n=m.exports.BFSRequire("fs");e(n)}))})),await async function(){await pe.mkdir("/C:"),await pe.mkdir("/D:"),await pe.mkdir("/C:/User"),await pe.mkdir("/C:/Program Files"),await pe.mkdir("/C:/Windows"),await pe.mkdir("/C:/Windows/System32"),await pe.mkdir("/C:/User/Desktop"),await pe.mkdir("/C:/User/Documents"),await pe.mkdir("/C:/User/Music"),await pe.mkdir("/C:/User/Pictures"),await pe.mkdir("/C:/User/Start Menu"),await pe.mkdir("/C:/Windows/Wallpapers"),await async function(){await Se("/C:/Windows/System32/Explorer.exe","Explorer"),await Se("/C:/Windows/System32/Notepad.exe","Notepad"),await Se("/C:/Windows/System32/MediaPlayer.exe","MediaPlayer"),await Se("/C:/Windows/System32/ChangeBackground.exe","ChangeBackground"),await Se("/C:/Program Files/Camera.exe","Camera");const e={icon:"https://editor.method.ac/images/favicon.svg",url:"https://editor.method.ac/",width:900,height:700},t={icon:"https://v1.windows93.net/favicon.ico",url:"https://v1.windows93.net/",width:1e3,height:800};await Se("/C:/Program Files/Method Draw.wapp",JSON.stringify(e)),await Se("/C:/Program Files/win93.wapp",JSON.stringify(t)),await Se("/C:/User/Desktop/My Computer.link","/C:/Windows/System32/Explorer.exe"),await Se("/C:/User/Desktop/Notepad.link","/C:/Windows/System32/Notepad.exe"),await Se("/C:/User/Desktop/Change Background.link","/C:/Windows/System32/ChangeBackground.exe"),await Se("/C:/User/Desktop/Method Draw.link","/C:/Program Files/Method Draw.wapp"),await Se("/C:/User/Desktop/win93.link","/C:/Program Files/win93.wapp")}(),await async function(){await pe.writeFile("/C:/User/Start Menu/My Computer.link","/C:/Windows/System32/Explorer.exe",{encoding:"utf8"}),await pe.writeFile("/C:/User/Start Menu/Desktop.link","/C:/User/Desktop",{encoding:"utf8"}),await pe.writeFile("/C:/User/Start Menu/Documents.link","/C:/User/Documents",{encoding:"utf8"}),await pe.writeFile("/C:/User/Start Menu/Music.link","/C:/User/Music",{encoding:"utf8"}),await pe.writeFile("/C:/User/Start Menu/Pictures.link","/C:/User/Pictures",{encoding:"utf8"})}(),await pe.writeFile("/C:/User/Desktop/TextFile.txt","hello world",{encoding:"utf8"})}()}function we(e){let t=function(t,...i){e&&"function"==typeof e&&e(t,...i)};return de.onAny(t),()=>{de.offAny(t)}}function me(){}async function fe(e){return new Promise(((t,i)=>{pe.readdir(e,(function(n,o){if(n)return i(n);e.startsWith("/")||(e="/"+e),o=o.map((t=>f.join(e,t))),t(o)}))}))}async function ge(e){return xe(e,{encoding:"utf8"})}async function xe(e,t={}){return new Promise(((i,n)=>{pe.readFile(e,t,(function(e,t){if(e)return n(e);i(t)}))}))}async function be(e){return Me(e)?ye(e):Ae(e)}async function Ae(e){return new Promise(((t,i)=>{pe.unlink(e,(function(n){if(n)return i(n);de.emit("deleted",e),t()}))}))}async function ye(e){if(await async function(e){return 0===(await fe(e)).length}(e))await new Promise(((t,i)=>{pe.rmdir(e,(function(){de.emit("deleted",e),t()}))}));else{const t=await fe(e);for(const e of t)Ee(e)?await Ae(e):(await ye(e),await new Promise(((t,i)=>{pe.rmdir(e,(function(){de.emit("deleted",e),t()}))})))}}async function ke(e,t){t||(t=await async function(e){const t=e=>"New Folder"+(e>1?` (${e})`:"");let i,n=1;do{i=f.join(e,t(n)),n+=1}while(await Te(i));return t(n-1)}(e)),new Promise(((i,n)=>{const o=f.join(e,t);pe.mkdir(o,(function(e){if(e)return n(e);i()}))})),de.emit("created",e)}async function Ce(e,t,i=""){t&&!(await Te(f.join(e,t)))||(t=await async function(e,t="Text File"){const i=e=>`${t}${e>1?` (${e})`:""}.txt`;let n,o=1;do{n=f.join(e,i(o)),o+=1}while(await Te(n));return i(o-1)}(e)),await new Promise(((n,o)=>{pe.writeFile(f.join(e,t),i,{encoding:"utf8"},(function(e){if(e)return o(e);n()}))})),de.emit("created",e)}async function ve(e){return"shortcut"===Le(e)?await ge(e):e}async function Se(e,t){await new Promise(((i,n)=>{pe.writeFile(e,t,{encoding:"utf8"},(function(e){if(e)return n(e);i()}))})),de.emit("created",e)}async function Fe(e,t){await pe.rename(e,f.join(f.dirname(e),t))}async function Pe(e,t){const i=f.join(t,f.basename(e));await new Promise(((t,n)=>{pe.rename(e,i,t)})),de.emit("deleted",e),de.emit("created",i)}async function De(e,t,i){const n=await xe(e);let o=f.basename(e),s=f.join(t,o);for(;!i;){if(s=f.join(t,o),!(await Te(s)))break;o="copy of "+o}return await new Promise((e=>{pe.writeFile(s,n,{},e)})),de.emit("created",s),s}function Ee(e){return!!f.extname(e)}function Me(e){return!f.extname(e)}function Re(e){return e.replaceAll("/","\\")}async function ze(e,t){let i=f.join(t,f.basename(e));await Te(i),await Ie(i);const n=await fe(e);for(const o of n)if(Me(o)){const e=f.basename(o);await ze(o,f.join(i,e))}else await De(o,i)}async function Ie(e,t=null){if(!(await Te(e)))return new Promise(((i,n)=>{pe.mkdir(e,t,i)}))}async function Te(e){return new Promise(((t,i)=>{pe.exists(e,(e=>{t(e)}))}))}async function je(){let e="/C:/Windows/Wallpapers";await Ie(e);const t=await async function(){return["/win7/assets/1.e901ce96.jpg","/win7/assets/2.6870f3c9.jpg","/win7/assets/3.1f345e75.jpg","/win7/assets/4.ccbdbab4.jpg","/win7/assets/5.6be36628.jpg","/win7/assets/6.9c860a3d.jpg","/win7/assets/7.56d3da5c.jpg","/win7/assets/8.c405d16d.jpg","/win7/assets/9.6b8b87d9.jpg","/win7/assets/10.e638251a.jpg","/win7/assets/11.0dc43e43.jpg","/win7/assets/12.a455593c.jpg","/win7/assets/13.22130df7.jpg","/win7/assets/14.dbb8b145.jpg"]}(),i=[];for(const n of t){const t=f.basename(n),o=f.join(e,t);await Te(o)||i.push($e(n,o))}await Promise.all(i)}async function $e(e,t){try{const i=m.exports.BFSRequire("buffer").Buffer,n=await fetch(e),o=await n.arrayBuffer();await new Promise((e=>{pe.writeFile(t,i.from(o),{},e)})),de.emit("created",t)}catch(i){console.error(i)}}async function Be(e,t){const i=m.exports.BFSRequire("buffer").Buffer;await new Promise((n=>{pe.writeFile(e,new i(t),{},n)})),de.emit("created",e)}async function Ue(e,t){for(let i of t){const t=await new Promise((e=>{const t=new FileReader;t.onload=function(){const t=this.result,i=new Uint8Array(t);e(i)},t.readAsArrayBuffer(i)})),n=f.join(e,i.name);await Be(n,t)}}window.Buffer=ue;var We=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",initFS:he,registerToFsEvent:we,createNewFile:function(e){},getPathName:me,resolveFileRunner:function(){},resolveFileSource:function(){},fileObject:function(e,t,i={},...n){return{path:e,type:t,extras:r({},n)}},fileRef:function(e,t){return{path:e,type:t}},readDirectory:fe,fetchTextFile:ge,fetchFile:xe,deletePath:be,deleteFile:Ae,deleteDirectory:ye,createNewFolder:ke,createNewTextFile:Ce,escapeShortcut:ve,writeTextFile:Se,renamePath:Fe,moveFile:Pe,copyFile:De,isFile:Ee,isDirectory:Me,reverseSlash:Re,copyDirectory:ze,searchInDirectory:async function e(t,i,n){const o=await fe(t);o.filter((e=>f.basename(e).toLocaleLowerCase().includes(i))).forEach(n);const s=o.filter((e=>Me(e)));await Promise.all(s.map((t=>e(t,i,n))))},_downloadDefaultWallpapers:je,writeBuffer:Be,handleDrop:Ue,stat:async function(e){return new Promise(((t,i)=>{pe.stat(e,(function(e,n){e&&i(e),t(n)}))}))}}),Ne="/win7/assets/jpg.ec7eb522.png",He={Explorer:{canHandle:({fileType:e})=>"directory"===e,windowProperties:async e=>{return{icon:(t=e,!t||t.endsWith(".exe")?"/win7/assets/my-computer.d682f5be.png":e.endsWith(":")?"/win7/assets/drive.3535cec5.png":"/win7/assets/folder.62906305.png"),width:600,height:500,title:"",isSystemApp:!0,taskbarTitle:!e||e.endsWith(".exe")?"Computer":f.basename(e)};var t}},MediaPlayer:{canHandle:({fileType:e})=>["audio","video"].includes(e),windowProperties:async e=>({icon:"/win7/assets/media-player.9f869d56.png",height:600,width:600,resizable:!0,maximizable:!0,isSystemApp:!0,taskbarTitle:!e||e.endsWith(".exe")?"Media Player":f.basename(e),singleInstance:!0}),thumbnail:async function(e){const t=Le(e);if(["audio"].includes(t))try{const t=await ve(e),i=await xe(t,{encode:"unit8array"}),n=await g(new Uint8Array(i)),o=(n.common||{}).picture||[];if(o[0]){const e=o[0];return URL.createObjectURL(new Blob([e.data]))}}catch(i){console.error(i)}return"video"===t?"/win7/assets/video.958772f7.png":"/win7/assets/mp3.f38077d0.png"}},Notepad:{canHandle:({fileType:e})=>"text"===e,windowProperties:e=>({icon:e&&!e.endsWith(".exe")?"/win7/assets/txt.60f5fb80.png":"/win7/assets/notepad.784c4ec2.png",width:600,height:500,isSystemApp:!0,taskbarTitle:!e||e.endsWith(".exe")?"NotePad":f.basename(e)})},WebAppRunner:{canHandle:({fileType:e})=>"webapp"===e,windowProperties:async e=>{const t=await ge(e),i=JSON.parse(t);return l(r({title:"Method Draw",icon:"/win7/assets/html.8ca37c61.png",width:600,height:500},i),{isSystemApp:!0,taskbarTitle:!e||e.endsWith(".exe")?"Web Application":f.basename(e)})}},Camera:{canHandle:({fileType:e})=>!1,windowProperties:e=>({icon:e?"/win7/assets/jpg.ec7eb522.png":"/win7/assets/camera.030eaad6.png",width:600,height:500,title:e?void e.path:"Camera",taskbarTitle:!e||e.endsWith(".exe")?"Camera":f.basename(e)})},ChangeBackground:{canHandle:()=>!1,windowProperties:()=>({title:"Change Background",icon:"/win7/assets/background-capplet.867357a9.png",width:900,height:490,maximizable:!1,isSystemApp:!0,taskbarTitle:"Change Background"})},PhotoViewer:{canHandle:({fileType:e})=>"image"===e,windowProperties:async e=>({title:"Photo Viewer",icon:Ne,width:900,height:700,maximizable:!0,isSystemApp:!0,taskbarTitle:!e||e.endsWith(".exe")?"Photo Viewer":f.basename(e)}),thumbnail:async e=>{if("image"===Le(e)){const t=await xe(e);return URL.createObjectURL(new Blob([t]))}return Ne}}};function Oe(e,t){return t?function(e){switch(e){case"./../apps/System32/BluePage.vue":return ce((()=>import("./BluePage.177f59b8.js")),["assets/BluePage.177f59b8.js","assets/vendor.957100f5.js"]);case"./../apps/System32/ChangeBackground.vue":return ce((()=>import("./ChangeBackground.1b48c11d.js")),["assets/ChangeBackground.1b48c11d.js","assets/vendor.957100f5.js"]);case"./../apps/System32/Dialog.vue":return ce((()=>import("./Dialog.0e1fb236.js")),["assets/Dialog.0e1fb236.js","assets/trashcan_full.812acff9.js","assets/vendor.957100f5.js"]);case"./../apps/System32/Explorer.vue":return ce((()=>import("./Explorer.1005d834.js")),["assets/Explorer.1005d834.js","assets/vendor.957100f5.js"]);case"./../apps/System32/MediaPlayer.vue":return ce((()=>import("./MediaPlayer.f910f4d7.js")),["assets/MediaPlayer.f910f4d7.js","assets/MediaPlayer.9387a60b.css","assets/vendor.957100f5.js"]);case"./../apps/System32/Notepad.vue":return ce((()=>import("./Notepad.269b9784.js")),["assets/Notepad.269b9784.js","assets/vendor.957100f5.js"]);case"./../apps/System32/PhotoViewer.vue":return ce((()=>import("./PhotoViewer.5ca308f6.js")),["assets/PhotoViewer.5ca308f6.js","assets/PhotoViewer.69c36c35.css","assets/vendor.957100f5.js","assets/trashcan_full.812acff9.js"]);case"./../apps/System32/WebAppRunner.vue":return ce((()=>import("./WebAppRunner.62f5b53f.js")),["assets/WebAppRunner.62f5b53f.js","assets/vendor.957100f5.js"]);default:return new Promise((function(t,i){("function"==typeof queueMicrotask?queueMicrotask:setTimeout)(i.bind(null,new Error("Unknown variable dynamic import: "+e)))}))}}("./../apps/System32/"+e+".vue"):function(e){switch(e){case"./../apps/ProgramFiles/Camera.vue":return ce((()=>import("./Camera.c885eea6.js")),["assets/Camera.c885eea6.js","assets/vendor.957100f5.js"]);default:return new Promise((function(t,i){("function"==typeof queueMicrotask?queueMicrotask:setTimeout)(i.bind(null,new Error("Unknown variable dynamic import: "+e)))}))}}("./../apps/ProgramFiles/"+e+".vue")}function Le(e){if(Me(e))return"directory";const t=f.extname(e).replace(".","");return["mp4","avi","mpg","mpeg","mov","mkv","mxu"].includes(t)?"video":["mp3","ogg","wma","wpl","mpa","mid","cda"].includes(t)?"audio":["png","ai","bmp","gif","ico","jpeg","jpg","ps","psd","svg","tif","tiff"].includes(t)?"image":["wapp"].includes(t)?"webapp":["txt"].includes(t)?"text":["link"].includes(t)?"shortcut":["exe"].includes(t)?"app":null}function Qe(e){const t=Le(e);if("app"===t)return ge(e);for(const i in He){const{canHandle:n}=He[i];if(n&&"function"==typeof n&&n({filePath:e,fileType:t}))return i}return{}}const qe={};x("data-v-98906f66");const Ke={class:"loading"},Ge=[p("h4",null,"Loading...",-1)];b(),qe.render=function(e,t,i,n,o,s){return h(),c("div",Ke,Ge)},qe.__scopeId="data-v-98906f66";const Ve=l(r(r({components:{WindowsContent:{name:"WindowsContent",data:()=>({loading:!1,module:null}),async created(){const e=await Oe(this.window.appName,this.window.isSystemApp);this.module=e.default?e.default:e},props:{window:{required:!0}},render(){return this.loading?A(qe):this.module?A(this.module,this.window):null}}}},X({window:X.obj()})),G("$wm")),{data:()=>({mover:null,moveStartPosition:null}),computed:{icons:()=>({maximize:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC0AAAAwCAYAAACFUvPfAAAA8ElEQVRoQ+2ZQQrCMBREZxAEd4p4CC/gxlN4Ag/jgbyEK88iiItu3HypqBSFkDa/3yqTdf6fyeskNC3xg4NPz2Y2ATAa8BqMZFX7a5o+AFgP2PSF5FSmA56QSAdAvkuItEgnCCgeiodXPPYArlE4HzobAOM3zVaZXpA8RZo2s1pvLtN9Uxfpvgk3LiTKdAhsZToEMwCRFukEAcVD8VA8PgnofTpnX+j0yKHkMUekPSjm9PAgvQJwzhFznHMEMCu5jTt6KWrV6rtHkZJjsUw7wky2+h/SOwDLKGwddCqS27ru9fOzQ5Ovlch0FHqRjiJ9A8asREBK+dtdAAAAAElFTkSuQmCC",unmaximize:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC0AAAAwCAYAAACFUvPfAAABeUlEQVRoQ+2ZvS4FURSFvxUahVC4T+AJFBIJFY+g8ALiObReQaX0EEokIhGtRKF3Q6FQIFumcN2MzOwzc87cIHvas/Y+a75Zc878iD94KMezmc3n1HeplfT+pe9t2sxWgMcuE2dq1yTdVj3CdCZJrzxIe4RKjQfpUiS9PkF6mtA9cOQhSxg/ANZrusFIX0jaSjDVKjGzU2AvTFcEGrbx2ZI2sx1g1OHSLgLHNf0dcJjQYyzprEmXHA8zOwc2EyYsIbmStBGmS6B0egTpyHRLRCIe/yIeq8BT5mqyBDzUegwaj5GkcY5pM1sGnms9roHtlr4nwK77wNSwIw5lug+Hn4+mYXqKY0M8gnR9yRsq0y/ATUfc+5Kq17nvz2IzznTrkuedzORbXpj2b8QgPasbMUj/C9KXwJu3BDnj1X+ZOoxB45Hpt7E8TP+KNxfv8no7olffd7xYPBaAub4uOtZ9SHrtWDOR9/6P2HfCEnVhugTFlB5BOoVSCc0nV3tfQInw70gAAAAASUVORK5CYII=",minimize:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACEAAAAwCAYAAACfbhNRAAAAk0lEQVRYR+2WsQ2AMAwE/0XFMizAFIzDIszBDrATFTIVFEjIQkrh4tJaSqz3/cdWgeMCPYgm7imgBEq8HQkTMAETX/8U7sAduAN3ZHssOVEzJyKil9Rl82tcP2yfDxMRsUsaGz+SXTfZXmlCEkrcrNRUYpE0ZDg3rs+2N2K7Zmw3nvWv62ACJlj5Wfmz0CAnSuXEBcnjKDHvTRciAAAAAElFTkSuQmCC",close:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAwCAYAAAB5R9gVAAAD6ElEQVRYR+2Ya8jfYxjHP1+nHBcRMiIim4Q3SDZbCqMc09b2wrTMIdZQKEktOYQVct6mnHIsh5y1g+MbUiKyJplkQk1EmO+6nu49/Z7f87/v+/f/z4tH/a83Tz33fV3353fd1+n+iwkmmmA8DIFqNzL00NBDNQ/U1ocx9P/3kO3tgUeAk4AzJH1a+6p+1m1HmDwAnA7MlfRuU39MDCWYZ4Cz06YfA0zSl/0cWtpr+z7g0rTnN2CWpPe26IwC2d4OeBo4t2Xwe2CapK+3Fsr2HcDVLTsBdaqkD+L/TaCrgDszh36ToL4bFMr2EuCGjP4vwF6SRu5zRGwfBbwDTMoofQVMl7ShXyjb1wK3FvSWSbpojIcS1AnAm8AuGeXPgBmSfu4KZfsK4O7C/qeAeZL+HQeUoGYCrwA7ZYx8DJwsaWMNyvYC4OFmaLR0XgDOl/TPuKBubrR9GvAisEPm0AjAUyT9noOyPRd4DNgms+d14CxJfzXXs63DdqT+s0BkXy9ZmerUn+1F25GpkbF96xZ7me3ZwJOFr3wVOKf5lbZnAXEVOe++n9K8p3erzdX2fGBFIQ6eB2ZL2mQ74i8gd8x49aMUf7/mrroKlAL9EuD+QhA/DjwIRFzkMjRa0ExJUXOy0gkoQV0JLC3YirTNBfAXqVxEKypKZ6AEdT1wU81oa31dKqjRgqrSF1CCCqAA6yLfppYTfztJ30AJKq4urrAk4ZFoNeGhzjIo0InAamDbwkkvp5KwqTNNIZWzNmwfC7xVaMJN3UeB+dHFu0L15SHbRwNRoffoegDwkKSLu+7vDGR7KrAm5pauxhv77pK0uIteJyDbh6ZZad+M0fXAa8DCwqG3SbquBlUFsn1QgjkgY+yHlE1rbd8LXFY49EZJMTlmpdZcJyeYgzMWfkoV+PNUDsLecuDCwpnXSLo9t14aP/ZJMIdllGNAi970SXPddrSPJ4A5BahFku7ptd4TyHYEbtSZIzJG46UQA9qHvdbTC+a5GMAy+lEGFkpa1l4fB2R795Tax2SM/RGPPEkBnBXbMQ+9FLNPZlM04wskxaQwKu2H4m6p6B2XMRLj5pmS3qhlS4qpmMsj++IV3Euiis+RFN4ckeYzaOc0z0zLKMcgHgN5TIOdxfau6SOPzyj9DZwnKVrNGKCoEbcU3BtPlXiy9C0dwiBiclL7oXgIEG/sdvGLAFwgKX6AGFgqiXKzpJGRph1DU1J27d04+XJJUfC2WmzHx8brOCr/FlkqafS93yvLjgRWAXsCxSI2CKHtqPjxE8yBwLgel6tD+wOHS3p7kENrOrb3A6b2sl/tZTXj//X6EKjm0Qnnoc1yj0NAxzFXLgAAAABJRU5ErkJggg=="}),focused(){return this.$wm.isWindowFocused(this.window.id)}},mounted(){this.setPosition({height:this.window.height,width:this.window.width,left:this.window.left,top:this.window.top}),this.window.movable&&(this.mover=re(this.$refs.title,this.moveStart,this.whileMove,this.moveEnd))},beforeUnmount(){this.mover&&this.mover.stop()},methods:{close(){this.$wm.closeWindow(this.window.id)},focus(){this.$wm.focusWindow(this.window.id)},moveStart(){return this.window.maximized&&this.maximize(),this.focused||this.focus(),this.moveStartPosition=this.getPosition(),!0},whileMove({left:e,top:t}){this.setPosition({left:e+this.moveStartPosition.left,top:t+this.moveStartPosition.top})},moveEnd({left:e,top:t}){this.setPosition({left:e+this.moveStartPosition.left,top:t+this.moveStartPosition.top}),Q(this.getPosition(),((e,t)=>{this.window[e]=t}))},minimize(){this.$wm.minimizeWindow(this.window.id)},maximize(){this.$wm.maximizeWindow(this.window.id)},setPosition(e){Q(e,((e,t)=>{this.$el.style[e]=Z(t)}))},getPosition(){const e={};return["top","left","width","height"].forEach((t=>{e[t]=this.$el[`offset${t[0].toUpperCase()}${t.slice(1)}`]})),e}},style({className:e}){const t="32px";return[e("window",l(r({userSelect:"none",position:"absolute"},this.window.resizable&&{resize:"both"}),{background:`linear-gradient(180deg,\n          ${Y(250,.1)} 0%,\n          ${Y(100,.1)} 50%,\n          ${Y(170,.1)} 100%\n        )`,boxShadow:`\n          0 0 0 1px ${Y(255,.7)},\n          0 0 8px 3px ${Y(10,.6)}\n        `,backdropFilter:"blur(7px) brightness(1.1)",borderRadius:"8px",display:"flex",flexDirection:"column",overflow:"hidden",fontSize:"15px",minWidth:"300px",minHeight:t,"&.maximized":{width:"100% !important",height:"calc(100% - 46px) !important",top:"0 !important",left:"0 !important",borderRadius:"0 !important",resize:"none !important",boxShadow:"none !important"},"&.minimized":{display:"none"},"&:not(.focused)":{opacity:.9,backdropFilter:"blur(4px)",boxShadow:`\n            0 0 0 1px ${Y(255,.9)},\n            0 0 8px 3px ${Y(10,.4)}\n          `}})),e("titlebar",{height:t,display:"flex",flexDirection:"row",alignItems:"center",padding:"0 10px","& > .title":{textShadow:new Array(4).fill(`0 0 5px ${Y(255,1)}`).join(","),flexGrow:1,height:"100%",lineHeight:t,"& > img":{width:"20px",marginRight:"5px",verticalAlign:"middle"}},"& > .buttons":{display:"flex",flexDirection:"row",height:"18px",alignSelf:"flex-start",boxShadow:`\n            inset 0 0 1px 1px ${Y(255,.4)},\n            0 0 0 2px ${Y(0,.2)}\n          `,borderTop:"none",borderBottomLeftRadius:"5px",borderBottomRightRadius:"5px",overflow:"hidden","& > *":{textAlign:"center",lineHeight:"18px",fontSize:"12px",fontWeight:"bold",color:"#fff",width:"26px",background:`linear-gradient(180deg,\n              ${Y(200,.5)} 0%,\n              ${Y(200,.5)} 40%,\n              ${Y(110,.4)} 60%,\n              ${Y(150,.4)} 90%,\n              ${Y(180,.4)} 100%\n            )`,backdropFilter:"grayscale(1)","& > img":{height:"13px",marginTop:"2px",filter:`drop-shadow(0 0 2px ${Y(0,1)})`},"&.maximize > img":{height:"11px",marginTop:"3px"},"&:not(:last-child)":{borderRight:`solid 1px ${Y(0,.4)}`},"&:hover":{filter:"brightness(1.3)"},"&:active":{filter:"brightness(0.9)"}},"& > .close":{width:"42px"},"&.focused > .close":{background:"linear-gradient(180deg,\n              rgba(255, 107, 63, 0.8) 0%,\n              rgba(255, 104, 79, 0.7) 40%,\n              rgba(175, 61, 44, 0.9) 55%,\n              rgba(204, 33, 33, 0.7) 80%,\n              rgba(255, 125, 125, 0.9) 100%\n            )"}}}),e("content",{flexGrow:1,border:`solid 1px ${Y(10,.5)}`,overflow:"hidden",margin:"0 5px 5px 5px",maxWidth:"calc(100% - 10px)","&.no-border":{border:0}})]}}),Xe=["id"],Ye={ref:"title",class:"title"},Ze=["src"],Je=["src"],_e=["src"],et=["src"],tt=["src"];Ve.render=function(e,t,i,n,o,s){const a=y("WindowsContent");return k((h(),c("div",{class:u([e.$style.window,s.focused&&"focused",e.window.maximized&&"maximized",e.window.minimized&&"minimized",e.window.resizable&&"resizable"]),style:P({zIndex:e.window.zIndex}),onClickCapture:t[3]||(t[3]=(...e)=>s.focus&&s.focus(...e)),id:"win-"+e.window.id},[p("div",{class:u(e.$style.titlebar)},[p("div",Ye,[p("img",{src:e.window.icon},null,8,Ze),v(" "+S(e.window.title),1)],512),p("div",{class:u(["buttons",s.focused&&"focused"])},[e.window.minimizable?(h(),c("div",{key:0,class:"minimize",onClick:t[0]||(t[0]=(...e)=>s.minimize&&s.minimize(...e))},[p("img",{src:s.icons.minimize},null,8,Je)])):d("",!0),e.window.maximizable?(h(),c("div",{key:1,class:"maximize",onClick:t[1]||(t[1]=(...e)=>s.maximize&&s.maximize(...e))},[e.window.maximized?(h(),c("img",{key:0,src:s.icons.unmaximize},null,8,_e)):(h(),c("img",{key:1,src:s.icons.maximize},null,8,et))])):d("",!0),e.window.closable?(h(),c("div",{key:2,class:"close",onClick:t[2]||(t[2]=(...e)=>s.close&&s.close(...e))},[p("img",{src:s.icons.close},null,8,tt)])):d("",!0)],2)],2),F(a,{window:e.window,ref:"content",class:u(e.$style.content),"wm-id":e.window.id,key:e.window.id},null,8,["window","class","wm-id"])],46,Xe)),[[C,!e.window.hidden]])};const it={top:"0px",left:"0px",width:"100%",height:"100%"},nt={capture:!0};const ot={error:"/win7/assets/error.8ced7e5c.png",info:"/win7/assets/info.e7aeb876.png",warning:"/win7/assets/warning.b92a9091.png",question:"/win7/assets/question.6e167781.png"};const st=D({started:!1}),at=D({cutList:[],copyList:[]}),rt=D({visible:!1,items:[],event:null,onClick:null}),lt=D({list:[]});let ct=20;const dt=async e=>{const t=await async function(e){const t=await ve(e),i=await Qe(t),{windowProperties:n}=He[i]||{};return n&&"function"==typeof n?await n(t):{}}(e)||{},i=(e,t)=>void 0===e?t:e,n=i(t.width,400),o=i(t.height,400),s=i(t.hidden,!1);return s||(ct+=1),l(r({},t),{title:t.title,maximizable:i(t.maximizable,!0),closable:i(t.closable,!0),minimizable:i(t.minimizable,!0),movable:!0,maximized:i(t.maximized,!1),minimized:i(t.maximized,!1),resizable:i(t.resizable,!0),hidden:s,width:n,height:o,left:window.innerWidth/2-n/2+20*Math.random()-10,top:window.innerHeight/2-o/2+20*Math.random()-10,icon:i(t.icon,"data:image/png;base64,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"),zIndex:s?-1:ct,isSystemApp:t.isSystemApp})};function pt(e,t,i,n){const o=`w-${Date.now()}-${Math.random()}`;return r({id:o},e)}const ut=e=>{const t=(i=e.type||"warning",{appName:"Dialog",isSystemApp:!0,maximizable:!1,closable:!0,minimizable:!0,movable:!0,maximized:!1,minimized:!1,resizable:!1,hidden:!1,width:500,height:200,left:window.innerWidth/2-250+20*Math.random()-10,top:window.innerHeight/2-100+20*Math.random()-10,icon:ot[i]});var i;const n=pt(r(r({type:"warning",content:"---",buttons:["OK"],title:"Dialog",defaultInput:"",autoClose:!0,zIndex:ct,onClick:e=>{}},t),e));lt.list.push(n)},ht=(e,t=!1)=>lt.list[t?"findIndex":"find"]((t=>t.id===e)),wt=e=>{const t=ht(e,!0);-1!==t&&lt.list.splice(t,1)},mt=(e,t)=>{const i=ht(e),n="boolean"!=typeof t?!i.minimized:t;ct+=1,i.zIndex=n?-1:ct,i.minimized=n};var ft=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",state:st,startWindowManager:()=>{st.started=!0},markedFiles:at,unmarkFiles:()=>{at.cutList=[],at.copyList=[]},markFileForCopy:e=>{at.copyList.push(e),at.cutList=[]},markFileForCut:e=>{at.cutList.push(e),at.copyList=[]},contextMenu:rt,openContextMenu:(e,t,i)=>{rt.event=e,rt.onClick=i,setTimeout((()=>{rt.visible=!0,rt.items=t}))},closeContextMenu:()=>{rt.visible=!1,rt.onClick=null,rt.items=[]},windows:lt,calculateFileWindowProperties:dt,openFile:async function(e){const t=Le(e=await ve(e)),i=await Qe(e);let n=await dt(e);if(n.appName=i,n.callbacks={},"app"!==t&&(n.filePath=e),n.singleInstance){const t=function(e){return lt.list.find((t=>t.appName===e))}(i);if(t&&t.callbacks&&t.callbacks.openFile&&"function"==typeof t.callbacks.openFile)return void t.callbacks.openFile(e)}const o=pt(n);return lt.list.push(o),o},openDialog:ut,findWindowById:ht,closeWindow:wt,minimizeWindow:mt,updateTitle:(e,t)=>{ht(e).title=t},updateToolbarTitle:(e,t)=>{ht(e).taskbarTitle=t},maximizeWindow:(e,t)=>{const i=ht(e);i.minimized&&mt(e,!1);const n="boolean"!=typeof t?!i.maximized:t;ct+=1,i.zIndex=ct,i.maximized=n},focusWindow:e=>{const t=ht(e);t&&(ct+=1,t.zIndex=ct)},isWindowFocused:e=>{const t=ht(e);if(t){const e=Math.max(...lt.list.map((e=>e.zIndex)));return-1!==e&&e===t.zIndex}return!1}});const gt=l(r(r({},X({file:X.str(),darkText:X.bool(),noIcon:X.bool(),shadow:X.bool(),block:X.bool(),singleClick:X.bool(),onClick:X.func(null)})),G("$wm","$fs","$filesContainer")),{data:()=>({selected:!1,showRename:!1,renaming:"",icon:null}),watch:{file(e,t){this.updateThumbnail()}},async created(){await this.updateThumbnail()},computed:{fileName(){return f.basename(this.file)},isShortcut(){return this.file.endsWith(".link")},shortcutIcon(){return this.isShortcut?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAEYklEQVR42u2YXWhbZRjHAzo3p0wcQ1rq2qytFuaFCAqyoZ1Kp26udt1sN0uRMbuLpMl2MRhejH24zdlauvVjmRYciCKi4kW14MVAEKtsIgObnvc0/ThpkzVpmrZpPk4+Ts7f5z0n0XRatqschPOHPyckOc3/9z7PeZ9zarGYMmXKlClTpkyZMmXKlClTpkyZMvV/1bttRwaPOY/CYbejPW+bHfZ7sC3nv9+jc530tw63HRkqGsBR+sEwEApmIQXSkGbJC4CUAiYyOSvkLFkl4+6e5RBFA+ArP6dCml6GIEXAAjKEQBJTScBDgcdwd3vI4wXHSV6NogHwlglmIPHw0pIq+qIQx4Ly2BsnvpUtT5/EmtqL2LCzC4+8+m8/VPcRLM+eQTimiAUVmLQVHUCB5NUAsiJ3MAEhDYycuvZreP0rnXi8sR/VB66i+uBKW5tceJA+j6ZUVliBogOEFK2FmJfCT/MqRCAGk+ChRr78acK/eV8/Kt66gspmF7Y0/eMKen/djvOIZ7TvGleBUFYHmI6o4syy7tvUShxg6Hefr6rZpW5purIivAbQ2Id1tReQ0AGMq8A8AcwQQD68n8JTC7mHWUjSgtPq8xZaDUBWDK5AmADo4tUAfORoFoInmBh/5tCnFN6FJ9/+BJUrAAiq+SrK9+kAScXgCvB93x8D4+HnEmA0A9wHTw/KpQ29qGn5GFX58FSJiv19KK2/jLKGyyjf20MA55FSwWhWCHSeYBjAbQLwR1WRh/9uWPKXvNmDGlr56oLw1sZePFp3EdaGbrW8vhubXuvA2hfeR5oAaNDxnav4AHz8RwhglgBo+xRlCrH7xDepsr19eIK3TnNu5aldNrz8Acp2dcLjXxy//od35oFtZ2B57iQyWTAaekLGEAD6sWUCCMTBFjMQfEtpz1OtA9qq662jt81GWvlNdRdwQwxIFPJPvkNd+/5W0FJ1jF5qwQXFSABafZYARodHg1LJnkuooou0kmzd34+S3V14uPYsfrw5OUMB3TEFIu97DuHo+iGSB1CNAogSwFxCZXECuDW1MFVa36tN2Ury5sYe3P/8KXR8PjzPVz5O4aNpVYwpqkgtw3LBWc7GAFBwKSSDLWU0i1tbB9TShj5Yqfc37uzA9raBFPQeZzEKH8+oYoKbIOgCFukCZkkOpFel+ADUOtI8AYST2vQdbTk7GF/70of6oHrxHN5zXV/UVp/gCsPL5KQGQc5CVIwCoJ1HovBsXlb5BBZ8C/J4yZ5urN9xDvdtO41LX9+c0wAoZGH4FHdWD087kVYJQwDo3l9aSFMFCGAxpVXBfYPNerce6FUsNcdR5/wsySvDnaSW+a/wimoUAM0BWnVJ6/+U7mX91mAkQcfOL34JPfZ6B3Yd/yrxm9vvjaUVrdfpHMaPij7EWC588QH44x9/DMzfiN3hidxTF3/tveO4mv0Oh7N4AC2t7wxxiMKH9ELb7e1wtLfD6dCPvGI22+rm4ck/m/8uuQf9BTnOv/r1EiIJAAAAAElFTkSuQmCC":""},isCutting(){return this.$wm.markedFiles.cutList.includes(this.file.path)},isCopying(){return this.$wm.markedFiles.copyList.includes(this.file.path)}},methods:{select(){this.$filesContainer&&(this.$filesContainer.unselectAll(),this.selected=!0)},selectIf(){if(this.$filesContainer){const e=this.$filesContainer.getSelectedFiles();0!==e.length&&-1!==e.findIndex((e=>e.file.path===this.file.path))||this.select()}},click(e){this.select(),e&&"click"===e.type&&!this.singleClick||this.onClick&&!0===this.onClick(this.file)||this.$wm.openFile(this.file)},async startRename(){this.showRename=!0,this.renaming=this.fileName,this.$nextTick((()=>{this.$refs.renameInput?this.$refs.renameInput.select():console.error("$refs.renameInput was undefined!")}))},renameDone(e){e&&Fe(this.file,this.renaming),this.showRename=!1,this.$emit("refresh")},async updateThumbnail(){this.icon=await async function(e){const t=await ve(e),i=await Qe(t),n=He[i]||{},{windowProperties:o,thumbnail:s}=n;return s&&"function"==typeof s?await s(t):o&&"function"==typeof o?(await o(t)).icon:{}}(this.file)}},style({className:e}){return[e("desktopIcon",l(r({height:"auto",fontSize:"15px",border:"solid 1px transparent",zIndex:1,"&.cutting":{opacity:.8},"&.selected":{background:Y([26,86,148],.4),border:`solid 1px ${Y([26,86,148],.6)}`},"&:hover:not(.selected)":{border:`solid 1px ${Y(255,.2)}`,background:`linear-gradient(180deg,\n            ${Y(250,.15)} 0%,\n            ${Y(200,.15)} 100%\n          )`},display:"flex"},this.block?{flexDirection:"row",flexGrow:1}:{flexDirection:"column",width:"120px"}),{alignItems:"center",justifyContent:"center",padding:"10px",margin:"5px","& .icons":l(r({},this.block?{marginRight:"14px"}:{marginBottom:"14px"}),{position:"relative","& > .icon":l(r({},this.block?{height:"34px"}:{width:"auto"}),{minHeight:"34px",maxHeight:"42px",filter:`drop-shadow(0 2px 2px ${Y(0,.3)})`}),"& > .shortcut":{position:"absolute",left:0,bottom:0,height:"36px",width:"36px"}}),"& > .name":r(r(l(r({width:"100%",maxWidth:"100%",maxHeight:"2.5em",overflow:"hidden",textOverflow:"ellipsis",padding:"3px"},this.block?{textAlign:"left"}:{textAlign:"center"}),{border:"none",background:"transparent"}),this.darkText?{color:`${Y(0,1)} !important`}:{color:Y(255,1)}),this.shadow&&{textShadow:new Array(2).fill(`0 0 3px ${Y(0,.8)}`).join(",")}),"&.renaming > .name":{overflow:"visible",width:"auto",maxWidth:"auto"}}))]}}),xt={key:0,class:"icons"},bt=["src"],At=["src"],yt={key:1,class:"name"};gt.render=function(e,t,i,n,o,s){return h(),c("div",{class:u([e.$style.desktopIcon,o.selected&&"selected",s.isCutting&&"cutting",o.renaming&&"renaming"]),draggable:"true",onDblclick:t[3]||(t[3]=(...e)=>s.click&&s.click(...e)),onClick:t[4]||(t[4]=(...e)=>s.click&&s.click(...e)),onPointerdown:t[5]||(t[5]=(...e)=>s.selectIf&&s.selectIf(...e))},[e.noIcon?d("",!0):(h(),c("div",xt,[p("img",{class:"icon",src:o.icon,draggable:"false"},null,8,bt),s.shortcutIcon?(h(),c("img",{key:0,class:"shortcut",src:s.shortcutIcon,draggable:"false"},null,8,At)):d("",!0)])),o.showRename?d("",!0):(h(),c("div",yt,S(s.fileName),1)),o.showRename?k((h(),c("input",{key:2,ref:"renameInput","onUpdate:modelValue":t[0]||(t[0]=e=>o.renaming=e),class:"name",onKeypress:t[1]||(t[1]=M(((...e)=>s.renameDone&&s.renameDone(...e)),["enter"])),onBlur:t[2]||(t[2]=e=>s.renameDone(!1))},null,544)),[[E,o.renaming]]):d("",!0)],34)};const kt=e=>{if(!e)return null;const t={};return e.width<0?(t.left=e.left+e.width,t.width=Math.abs(e.width)):(t.left=e.left,t.width=e.width),e.height<0?(t.top=e.top+e.height,t.height=Math.abs(e.height)):(t.top=e.top,t.height=e.height),t},Ct=l(r(r(l(r({},G("$wm","$fs")),{components:{File:gt}}),X({path:X.str("/"),search:X.str(null),fileProps:X.obj(),direction:X.oneOf(["row","column"],"row"),contextMenuExtras:X.obj({},(e=>"object"==typeof e&&!Object.keys(e).find((t=>"function"!=typeof e[t]))))})),((e,t=!1)=>({provide(){return{[e]:t?this[t]:this}}}))("$filesContainer")),{data:()=>({mover:null,dragger:null,dropper:null,selecting:!1,fileRefs:[],selectionRectangle:null,loading:!1,files:[],unRegisterToFsEvent:()=>{}}),watch:{search(e,t){this.fetchDirectoryFiles()},path(e,t){this.unRegisterToFsEvent&&"function"==typeof this.unRegisterToFsEvent&&this.unRegisterToFsEvent(),this.unRegisterToFsEvent=we(this.onFsEvent),this.fetchDirectoryFiles()}},computed:{staticPath(){return null!==this.path},dirFiles(){return this.files},isInDesktop(){return"C:/User/Desktop"===this.path&&"Desktop"===this.$parent.$options.name}},beforeDestroy(){this.unRegisterToFsEvent()},mounted(){this.unRegisterToFsEvent=we(this.onFsEvent),this.mover=re(this.$el,this.selectStart,this.whileSelect,this.selectEnd),this.droper=((e=null,t,i)=>{const n=async e=>{e.preventDefault();let n=function(e){let t;const i=e;let n=[];if(i.dataTransfer.items){for(t=0;t<i.dataTransfer.items.length;t++)if("file"===i.dataTransfer.items[t].kind){const e=i.dataTransfer.items[t].getAsFile();n.push(e)}}else for(t=0;t<i.dataTransfer.files.length;t++)n.push(i.dataTransfer.files[t]);return n}(e);if(n.length)return void(await Ue(t,n));e.preventDefault();const o=e.dataTransfer.getData("text");if(o){const e=JSON.parse(o);i(e)}},o=e=>{e.preventDefault()};return te(e,"dragover",o,nt),te(e,"drop",n,nt),{stop:()=>{ie(e,"dragover",o,nt),ie(e,"drop",n,nt)}}})(this.$el,this.path,this.onDrop),this.dragger=((e=null,t)=>{const i=e=>{const i=t(e);if(!1===i)return e.preventDefault();e.stopPropagation();const n=JSON.stringify(i);return e.dataTransfer.setData("text",n)};return e.setAttribute("draggable",!0),te(e,"dragstart",i,nt),{stop:()=>{ie(e,"dragstart",i,nt)}}})(this.$el,this.onDrag),this.fetchDirectoryFiles()},beforeUnmount(){this.mover&&this.mover.stop(),this.droper&&this.droper.stop(),this.dragger&&this.dragger.stop()},beforeUpdate(){this.fileRefs=[]},methods:{onDrag(e){return!!this.isEventOnFile(e)&&(this.mover&&this.mover.cancelMove(),this.$nextTick((()=>{this.selecting=!1,this.$el.style.overflow=null})),this.getSelectedFiles().map((e=>e.file)))},onDrop(e){this.copyOrMoveFilesHere("move",e)},getSelectedFiles(){return this.fileRefs.filter((e=>e.selected))},isEventOnFile(e){return this.getSelectedFiles().some((t=>t.$el.contains(e.target)))},openContextMenu(e){const t=this.getSelectedFiles();let i=[];this.isEventOnFile(e)?(i=[...i,"Open","Delete","Cut","Copy"],1===t.length&&(i=[...i,"Rename"])):(this.unselectAll(),i=[...i,"Refresh",...this.staticPath?["Create New Folder","Create New Text File"]:[],...this.staticPath&&(this.$wm.markedFiles.copyList.length||this.$wm.markedFiles.cutList.length)?["Paste"]:[],...Object.keys(this.contextMenuExtras)]),this.$wm.openContextMenu(e,i,(async e=>{if("Open"===e)t.forEach((e=>e.click(null)));else if("Delete"===e)this.loading=!0,await Promise.all(t.map((async e=>{const{file:t}=e;try{await be(t)}catch(i){console.error(i)}}))),this.loading=!1;else if("Refresh"===e)await this.fetchDirectoryFiles();else if("Create New Folder"===e)await ke(this.path),await this.fetchDirectoryFiles();else if("Create New Text File"===e)await Ce(this.path),await this.fetchDirectoryFiles();else if("Rename"===e)t.forEach((e=>e.startRename()));else if("Cut"===e)t.forEach((e=>{let t=e.file;this.$wm.markFileForCut(t)}));else if("Copy"===e)t.forEach((e=>{let t=e.file;this.$wm.markFileForCopy(t)}));else if("Paste"===e)Promise.all([this.copyOrMoveFilesHere("copy",this.$wm.markedFiles.copyList),this.copyOrMoveFilesHere("move",this.$wm.markedFiles.cutList)]).then((()=>{this.$wm.unmarkFiles()}));else if(this.contextMenuExtras[e]){if("function"!=typeof this.contextMenuExtras[e])throw new Error("bad value for extra menu item");this.contextMenuExtras[e]()}}))},selectStart(e){const t=((e,t)=>{let i=e;const n={left:0,top:0},o=null===t;for(;i&&i!==t;)n.left+=i[o?"offsetWidth":"offsetLeft"],n.top+=i[o?"offsetHeight":"offsetTop"],i=i[o?"previousElementSibling":"offsetParent"];return n})(this.$el,document.body);this.selectionRectangle={left:e.left-t.left,top:e.top-t.top,width:0,height:0},this.selecting=!0},whileSelect(e){this.$el.style.overflow="hidden";const t=kt(l(r({},this.selectionRectangle),{width:e.left,height:e.top}));Object.keys(t||{}).forEach((e=>{this.$refs.selection.style[e]=Z(t[e])}))},selectEnd(e){this.$el.style.overflow=null;const t=kt(l(r({},this.selectionRectangle),{width:e.left,height:e.top}));this.fileRefs.forEach((e=>{const i=e.$el,n={width:i.offsetWidth,height:i.offsetHeight,left:i.offsetLeft,top:i.offsetTop};var o,s;e.selected=((o=n).left>(s=t).left&&o.left+o.width<s.left+s.width||o.left+o.width>s.left&&o.left<s.left+s.width)&&(o.top>s.top&&o.top+o.height<s.top+s.height||o.top+o.height>s.top&&o.top<s.top+s.height)})),this.selecting=!1},unselectAll(){this.fileRefs.forEach((e=>{e.selected=!1}))},async copyOrMoveFilesHere(e,t){if(!t.length)return;const i=[...t];"move"===e&&await Promise.all(i.map((e=>Pe(e,this.path)))),"copy"===e&&(await Promise.all(i.filter((e=>Ee(e))).map((e=>De(e,this.path)))),i.filter(Me).length&&await Promise.all(i.filter((e=>Me(e))).map((e=>ze(e,this.path))))),await this.fetchDirectoryFiles()},addFileToRefs(e){e&&this.fileRefs.push(e)},async fetchDirectoryFiles(){this.loading=!0,this.files=[];try{if(this.search)await window.$fs.searchInDirectory(this.path,this.search,(e=>{this.files.push(e)}));else{const e=await window.$fs.readDirectory(this.path);this.files=[...e]}}catch(e){console.error(e)}finally{this.loading=!1}},onFsEvent(e,...t){const[i]=t;f.dirname(i)===this.path&&("created"===e&&(this.files=[...this.files.filter((e=>e!==i)),i]),"deleted"===e&&(this.files=this.files.filter((e=>e!==i))))}},style({className:e}){return[e("filesContainer",{position:"relative",flexGrow:1,display:"flex",flexDirection:this.direction,flexWrap:"wrap",alignItems:"flex-start",justifyContent:"flex-start",alignContent:"flex-start",width:"100%",height:"100%",overflow:"auto","&.refreshing":{"& > *":{display:"none"}}}),e("selection",{background:Y([26,86,148],.4),border:`solid 1px ${Y([26,86,148],.6)}`,position:"absolute"})]}});Ct.render=function(e,t,i,n,o,s){const a=y("File");return h(),c("div",{class:u(e.$style.filesContainer),onContextmenu:t[0]||(t[0]=(...e)=>s.openContextMenu&&s.openContextMenu(...e)),style:P({cursor:o.loading?"wait":"inherit"})},[(h(!0),c(R,null,z(s.dirFiles,(t=>(h(),I(a,T({ref:s.addFileToRefs,key:t.path,file:t},e.fileProps,{onRefresh:s.fetchDirectoryFiles}),null,16,["file","onRefresh"])))),128)),o.selecting?(h(),c("div",{key:0,ref:"selection",class:u(e.$style.selection)},null,2)):d("",!0)],38)};const vt=l(r({name:"Desktop",components:{FilesContainer:Ct}},G("$wm","$fs","$cnf")),{style:({className:e})=>[e("desktop",l(r({position:"absolute"},it),{paddingBottom:"46px",backgroundPosition:"bottom center",backgroundSize:"cover"}))],data:()=>({wallpaper:null}),async mounted(){this.loadWallpaper()},watch:{"$cnf.values.wallpaperPath"(){this.loadWallpaper()}},computed:{wallpaperFile(){return this.$cnf.values.wallpaperPath},contextMenuExtras(){return{"Change Background":this.openChangeBackground}}},methods:{openChangeBackground(){this.$wm.openFile("/C:/Windows/System32/ChangeBackground.exe")},async loadWallpaper(){if(this.wallpaperFile){const e=await xe(this.wallpaperFile),t=URL.createObjectURL(new Blob([e]));this.$refs.desktop.style.backgroundImage='url("'+t+'")'}else this.$refs.desktop.style.backgroundImage='url("/win7/assets/1.e901ce96.jpg")'}}});vt.render=function(e,t,i,n,o,s){const a=y("FilesContainer");return h(),c("div",{class:u(e.$style.desktop),ref:"desktop"},[F(a,{path:"/C:/User/Desktop",direction:"column","file-props":{shadow:!0},"context-menu-extras":s.contextMenuExtras},null,8,["context-menu-extras"])],2)};const St=l(r({inheritAttrs:!1,emits:["update:visible"]},X({visible:X.bool(!1),autoClose:X.bool(!1),dark:X.bool(!1)})),{watch:{visible:{handler(e){e?setTimeout((()=>{this.bindEvents()})):this.unbindEvents()},immidiate:!0}},beforeUnmount(){this.unbindEvents()},methods:{closeIf(e){!this.autoClose&&this.$refs.popup.contains(e.target)||setTimeout((()=>{this.$emit("update:visible",!1)}))},bindEvents(){te(window,"pointerup",this.closeIf)},unbindEvents(){ie(window,"pointerup",this.closeIf)}},style({className:e}){const t=.1;return[e("staticWindow",l(r({userSelect:"none",position:"absolute",background:`linear-gradient(180deg,\n          ${Y(250,t)} 0%,\n          ${Y(250,t)} 40%,\n          ${Y(140,t)} 43%,\n          ${Y(170,t)} 100%\n        )`},this.dark?{backdropFilter:"blur(8px) brightness(0.5)",boxShadow:`\n            0 0 0 1px ${Y(180,.5)},\n            0 0 8px 3px ${Y(10,.3)}\n          `}:{backdropFilter:"blur(8px) brightness(0.9)",boxShadow:`\n            0 0 0 1px ${Y(255,.9)},\n            0 0 8px 3px ${Y(10,.6)}\n          `}),{borderRadius:"8px",overflow:"hidden",fontSize:"15px",zIndex:99999})),e("content",{flexGrow:1,overflow:"hidden",margin:"5px",maxWidth:"calc(100% - 10px)","&.no-border":{border:0}})]}});St.render=function(e,t,i,n,o,s){return h(),I(B,{to:"body"},[e.visible?(h(),c("div",T({key:0},e.$attrs,{ref:"popup",class:e.$style.staticWindow,onPointerup:t[0]||(t[0]=$(((...e)=>s.closeIf&&s.closeIf(...e)),["stop"]))}),[p("div",{class:u(e.$style.content)},[j(e.$slots,"default")],2)],16)):d("",!0)])};const Ft=l(r({},G("$fs")),{components:{Popup:St,File:gt},data:()=>({popup:!1,searchString:"",leftFiles:[],rightFiles:[]}),async created(){this.fetchLeftFiles(),this.$fs.readDirectory("/C:/User/Start Menu").then((e=>{this.rightFiles=[...e]}))},computed:{leftContainerFiles(){return this.leftFiles},rightContainerFiles(){return this.rightFiles}},watch:{searchString(e,t){this.fetchLeftFiles()},popup(e){e&&this.$nextTick((()=>{try{this.$refs.searchInput.focus()}catch(e){console.error(e)}}))}},methods:{showPopup(){this.searchString="",this.popup=!0},fetchLeftFiles(){this.leftFiles=[];const{searchString:e,$fs:t}=this;e&&e.trim().length?t.searchInDirectory("/C:/Program Files",e,(e=>{this.leftFiles.push(e)})):t.readDirectory("/C:/Program Files").then((e=>{this.leftFiles=[...e]}))}},style({className:e}){const t="600px",i="30px",n=parseInt("46px",10)-1+"px";return[e("popup",{display:"flex",flexDirection:"row",height:t,"& > .left-container":{display:"flex",flexDirection:"column",width:"62%",backgroundColor:Y(255,1),borderRadius:"4px",border:`solid 1px ${Y(0,.4)}`,"& > .files":{flexGrow:1,maxHeight:parseInt(t,10)-parseInt(i,10)-20+"px",overflow:"auto"},"& > .search":{lineHeight:i,padding:"0 5px",fontSize:"15px",border:`solid 1px ${Y(1,.5)}`,background:Y(255,1),borderRadius:"2px",height:i,margin:"10px"}},"& > .right-container":{flexGrow:1}}),e("popupStyle",{left:"0",bottom:`${parseInt("46px",10)+2}px`,borderBottomLeftRadius:"0 !important",borderBottomRightRadius:"0 !important",width:"550px"}),e("orb",{margin:"0 9px",width:"46px",minWidth:"46px",height:"46px",backgroundImage:'url("/win7/assets/normal.46e6633c.png");',backgroundPosition:"center",backgroundSize:n,backgroundRepeat:"no-repeat",filter:"brightness(1)",transition:"filter 0.1s","&:hover, &:focus":{filter:"brightness(1.2)"},"&:active":{filter:"brightness(1)"}})]}}),Pt={class:"left-container"},Dt={class:"files"},Et={class:"right-container"};Ft.render=function(e,t,i,n,o,s){const a=y("File"),r=y("Popup");return h(),c(R,null,[p("div",{class:u(e.$style.orb),onClickCapture:t[0]||(t[0]=(...e)=>s.showPopup&&s.showPopup(...e))},null,34),F(r,{visible:o.popup,"onUpdate:visible":t[2]||(t[2]=e=>o.popup=e),class:u(e.$style.popupStyle),"auto-close":"",dark:""},{default:U((()=>[p("div",{class:u(e.$style.popup)},[p("div",Pt,[p("div",Dt,[(h(!0),c(R,null,z(s.leftContainerFiles,(e=>(h(),I(a,{key:e.path,file:e,block:"","dark-text":"","single-click":""},null,8,["file"])))),128))]),k(p("input",{ref:"searchInput","onUpdate:modelValue":t[1]||(t[1]=e=>o.searchString=e),class:"search",placeholder:"Search programs and files"},null,512),[[E,o.searchString]])]),p("div",Et,[(h(!0),c(R,null,z(s.rightContainerFiles,(e=>(h(),I(a,{key:e.path,file:e,block:"","no-icon":"",shadow:"","single-click":""},null,8,["file"])))),128))])],2)])),_:1},8,["visible","class"])],64)};const Mt=l(r(r({emits:["close","minimize"]},G("$wm")),X({window:X.obj()})),{computed:{focused(){return this.$wm.isWindowFocused(this.window.id)}},methods:{click(){this.$wm.minimizeWindow(this.window.id,this.focused)},openContextMenu(e){this.$wm.openContextMenu(e,[...this.window.maximizable&&!this.window.minimized?[this.window.maximized?"Unmaximize":"Maximize"]:[],...this.window.minimizable?[this.window.minimized?"Restore":"Minimize"]:[],...this.window.closable?["Close"]:[]],(e=>{["Maximize","Unmaximize"].includes(e)?this.$wm.maximizeWindow(this.window.id):["Minimize","Restore"].includes(e)?this.$wm.minimizeWindow(this.window.id):"Close"===e&&this.$wm.closeWindow(this.window.id)}))}},style:({className:e})=>[e("taskbarRunningWindow",{userSelect:"none",background:`linear-gradient(150deg,\n          ${Y(255,.4)} 0%,\n          ${Y(255,.4)} 15%,\n          ${Y(200,.1)} 30%,\n          ${Y(200,.2)} 80%,\n          ${Y(255,.4)} 100%\n        )`,border:`solid 1px ${Y(10,.3)}`,height:"calc(100% - 6px)",borderRadius:"4px",marginRight:"2px",marginTop:"3px",display:"flex",alignItems:"center",justifyContent:"flex-start",padding:"0 10px",fontSize:"14px",fontWeight:"bold",color:Y(255,1),textShadow:new Array(2).fill(`0 0 1px ${Y(0,1)}`).join(","),whiteSpace:"nowrap",overflow:"hidden",textOverflow:"clip",width:"200px",textAlign:"left","& > img":{width:"24px",marginRight:"5px"},"&:hover":{background:`linear-gradient(150deg,\n            ${Y(255,.6)} 0%,\n            ${Y(255,.6)} 15%,\n            ${Y(200,.3)} 30%,\n            ${Y(200,.4)} 80%,\n            ${Y(255,.6)} 100%\n          )`},"&.focused":{background:`linear-gradient(150deg,\n            ${Y(50,.4)} 0%,\n            ${Y(50,.4)} 15%,\n            ${Y(50,.1)} 30%,\n            ${Y(50,.2)} 80%,\n            ${Y(50,.4)} 100%\n          )`},"&.minimized":{fontStyle:"italic"}})]}),Rt=["src"];Mt.render=function(e,t,i,n,o,s){return h(),c("div",{class:u([s.focused&&"focused",e.$style.taskbarRunningWindow]),onClick:t[0]||(t[0]=(...e)=>s.click&&s.click(...e)),onContextmenu:t[1]||(t[1]=(...e)=>s.openContextMenu&&s.openContextMenu(...e))},[p("img",{src:e.window.icon},null,8,Rt),v(" "+S(e.window.taskbarTitle),1)],34)};const zt={data:()=>({clockTimer:null}),mounted(){this.drawClock(),this.clockTimer=setInterval(this.drawClock,1e3)},beforeUnmount(){clearInterval(this.clockTimer)},methods:{drawClock(){const e=this.$refs.clock,t=e.getContext("2d");t.clearRect(0,0,e.width,e.height),t.restore();let i=e.height/2;t.translate(i,i),i*=.9,this.drawFace(t,i),this.drawNumbers(t,i),this.drawTime(t,i)},drawFace(e,t){e.beginPath(),e.arc(0,0,t,0,2*Math.PI),e.fillStyle="#edfefd",e.fill();const i=e.createRadialGradient(0,0,.95*t,0,0,1.05*t);i.addColorStop(0,"#315454"),i.addColorStop(.4,"#fff"),i.addColorStop(.6,"#fff"),i.addColorStop(1,"#315454"),e.strokeStyle=i,e.lineWidth=.1*t,e.stroke(),e.beginPath(),e.arc(0,0,.1*t,0,2*Math.PI),e.fillStyle="#333",e.fill()},drawNumbers(e,t){let i,n;for(e.font=.15*t+"px arial",e.textBaseline="middle",e.textAlign="center",n=1;n<13;n+=1)i=n*Math.PI/6,e.rotate(i),e.translate(0,.85*-t),e.rotate(-i),e.fillText(n%3==0?n:".",0,0),e.rotate(i),e.translate(0,.85*t),e.rotate(-i)},drawTime(e,t){const i=new Date;let n=i.getHours(),o=i.getMinutes(),s=i.getSeconds();n%=12,n=n*Math.PI/6+o*Math.PI/360+s*Math.PI/21600,this.drawHand(e,n,.5*t,.07*t),o=o*Math.PI/30+s*Math.PI/1800,this.drawHand(e,o,.8*t,.07*t),s=s*Math.PI/30,this.drawHand(e,s,.9*t,.02*t)},drawHand(e,t,i,n){e.beginPath(),e.lineWidth=n,e.lineCap="round",e.moveTo(0,0),e.rotate(t),e.lineTo(0,-i),e.stroke(),e.rotate(-t)}}},It={ref:"clock",width:"200",height:"200"};zt.render=function(e,t,i,n,o,s){return h(),c("canvas",It,null,512)};const Tt={data:()=>({date:new Date}),computed:{readableFormat(){return this.date.toDateString()},daysGrid(){const[e,t]=[this.date.getFullYear(),this.date.getMonth()],i=new Date(e,t,1).getDay(),n=new Date(e,t+1,0).getDate(),o=new Date(e,t,0).getDate(),s=[["Su","Mo","Tu","We","Th","Fr","Sa"].map((e=>({key:e,value:e,class:[]})))];for(let a=0;a<6;a+=1){const r=[],l=7*a;for(let s=0;s<7;s+=1){let c=l+s-(i-1),d=!0,p=t;c<1?(c+=o,p-=1):c>n?(c-=n,p+=1):d=!1;const u=new Date(e,p,c).toDateString()===(new Date).toDateString();r.push({key:`day${7*a+s}`,value:c,class:[d&&"gray",u&&"selected"]})}s.push(r)}return s}},style:({className:e})=>[e("calendarWidget",{width:"100%",height:"100%",textAlign:"center","& .gray":{opacity:.25},"& .selected":{background:"rgba(10, 148, 248, 0.1)",color:"rgb(10, 148, 248)",fontWeight:"bold",border:"dotted 1px rgba(10, 148, 248, 0.9)",borderRadius:"4px"},"& td, & th":{padding:"3px 5px",border:"solid 1px transparent"}})]},jt={colspan:"7"},$t=["textContent"];Tt.render=function(e,t,i,n,o,s){return h(),c("table",{class:u(e.$style.calendarWidget)},[p("thead",null,[p("th",jt,S(s.readableFormat),1)]),p("tbody",null,[(h(!0),c(R,null,z(s.daysGrid,((e,t)=>(h(),c("tr",{key:t},[(h(!0),c(R,null,z(e,(e=>(h(),c("td",{key:e.key,class:u(e.class),textContent:S(e.value)},null,10,$t)))),128))])))),128))])],2)};const Bt={components:{Popup:St,ClockWidget:zt,CalendarWidget:Tt},data:()=>({time:new Date,popup:!1}),computed:{formattedFime(){const{time:e}=this;return`${e.getHours()%12||12}:${e.getMinutes().toString().padStart(2,0)} ${e.getHours()>12?"PM":"AM"}\n${e.getDate()}/${e.getMonth()+1}/${e.getFullYear()}`}},created(){setInterval((()=>{this.time=new Date}),1e3)},methods:{showPopup(){this.popup=!0}},style:({className:e})=>[e("popupStyle",{right:"15px",bottom:`${parseInt("46px",10)+15}px`}),e("taskbarClock",{width:"auto",whiteSpace:"pre",textAlign:"center",color:Y(255,1),textShadow:`0 0 2px ${Y(0,.8)}`,display:"flex",alignItems:"center",justifyContent:"center",lineHeight:1.25,fontSize:"15px"}),e("popup",{display:"flex",flexDirection:"row",background:Y(255,1),borderRadius:"6px",padding:"15px",alignItems:"center",justifyContent:"center",border:`solid 1px ${Y(0,.5)}`,"& > *":{"&:first-child":{marginRight:"15px"}}})]};Bt.render=function(e,t,i,n,o,s){const a=y("CalendarWidget"),r=y("ClockWidget"),l=y("Popup");return h(),c("div",{class:u(e.$style.taskbarClock),onClickCapture:t[1]||(t[1]=(...e)=>s.showPopup&&s.showPopup(...e))},[v(S(s.formattedFime)+" ",1),F(l,{visible:o.popup,"onUpdate:visible":t[0]||(t[0]=e=>o.popup=e),class:u(e.$style.popupStyle)},{default:U((()=>[p("div",{class:u(e.$style.popup)},[F(a),F(r)],2)])),_:1},8,["visible","class"])],34)};const Ut=l(r({},G("$wm")),{methods:{onClick(){const e=this.$wm.windows.list,t=e.every((e=>e.minimized));e.forEach((e=>{this.$wm.minimizeWindow(e.id,!t)}))}},style:({className:e})=>[e("showDesktop",{width:"12px",minWidth:"12px",height:parseInt("46px",10)-1+"px",marginTop:"2px",background:`linear-gradient(150deg,\n          ${Y(250,.2)} 0%,\n          ${Y(200,.2)} 15%,\n          ${Y(10,.3)} 30%,\n          ${Y(10,.3)} 80%,\n          ${Y(200,.3)} 100%\n        )`,borderLeft:`solid 1px ${Y(200,.3)}`,"&:hover, &:focus":{filter:"brightness(1.6)"},"&:active":{filter:"brightness(1)"}})]});Ut.render=function(e,t,i,n,o,s){return h(),c("div",{class:u(e.$style.showDesktop),onClick:t[0]||(t[0]=(...e)=>s.onClick&&s.onClick(...e))},null,2)};const Wt=l(r({},G("$wm")),{components:{TaskbarOrb:Ft,TaskbarRunningWindow:Mt,TaskbarClock:Bt,TaskbarShowDesktop:Ut},computed:{windowsList(){return this.$wm.windows.list.filter((e=>!e.hidden))}},style:({className:e})=>[e("taskbar",{position:"absolute",zIndex:9999,display:"flex",flexDirection:"row",height:"46px",width:"100%",left:0,bottom:0,background:`linear-gradient(180deg,\n          ${Y(10,.8)} 0%,\n          ${Y(200,.9)} 4%,\n          ${Y(70,.4)} 5%,\n          ${Y(70,.4)} 100%\n        )`,backdropFilter:"blur(4px)"}),e("windowsList",{flexGrow:1,display:"flex"}),e("try",{width:"auto",display:"flex",flexDirection:"row",minWidth:"200px",justifyContent:"flex-end",background:`linear-gradient(270deg,\n          ${Y(10,.3)} 0%,\n          ${Y(10,.3)} 70%,\n          transparent 100%\n        )`,"& > *":{margin:"0 15px"}})]});Wt.render=function(e,t,i,n,o,s){const a=y("TaskbarOrb"),r=y("TaskbarRunningWindow"),l=y("TaskbarClock"),d=y("TaskbarShowDesktop");return h(),c("div",{class:u(e.$style.taskbar)},[F(a),p("div",{class:u(e.$style.windowsList)},[(h(!0),c(R,null,z(s.windowsList,(e=>(h(),I(r,{key:e.id,window:e},null,8,["window"])))),128))],2),p("div",{class:u(e.$style.try)},[F(l)],2),F(d)],2)};const Nt=l(r(r({emits:["click"]},X({visible:X.bool(!1),event:X.any(null),items:X.arr([]),onClick:X.func((()=>{}))})),G(["$wm"])),{data:()=>({position:null}),watch:{visible:{handler(e){e?this.open():this.close()},immidiate:!0}},beforeUnmount(){this.unbindEvents()},methods:{open(){const{event:e}=this;let t={width:parseInt("180px",10),height:parseInt("30px",10)*this.items.length};e&&(e.preventDefault(),e.stopPropagation(),t=l(r({},t),{left:e.clientX,top:e.clientY}),t.left+t.width>window.innerWidth&&(t.left=window.innerWidth-t.width),t.top+t.height>window.innerHeight&&(t.top=window.innerHeight-t.height)),this.position={},Q(t,((e,t)=>{this.position[e]=Z(t)})),this.bindEvents()},emitItemClick(e){""!==e&&(this.$emit("click",e),this.close())},close(){this.unbindEvents(),this.$wm.closeContextMenu()},bindEvents(){setTimeout((()=>{te(window,"pointerup",this.close)}),200)},unbindEvents(){ie(window,"pointerup",this.close)}},style:({className:e})=>[e("contextMenu",{position:"absolute",zIndex:999999,width:"180px",height:"auto",background:Y(230,1),borderRadius:"2px",overflow:"hidden",fontSize:"13px",boxShadow:`0 3px 6px 1px ${Y(0,.3)}`,"& > li":{display:"block",height:"30px",lineHeight:"30px",padding:"0 20px",whiteSpace:"nowrap","&.hr":{height:"1px",background:Y(0,.2),borderBottom:`solid 1px ${Y(250,.2)}`},"&:not(.hr):hover":{color:Y(255,1),background:"#4082c1"}}})]}),Ht=["onClick"];Nt.render=function(e,t,i,n,o,s){return h(),I(B,{to:"body"},[e.visible?(h(),c("ul",{key:0,class:u(e.$style.contextMenu),style:P(o.position),onPointerup:t[0]||(t[0]=$((()=>{}),["stop"]))},[(h(!0),c(R,null,z(e.items,((e,t)=>(h(),c("li",{key:e+t,class:u(!e&&"hr"),onClick:t=>s.emitItemClick(e)},S(e),11,Ht)))),128))],38)):d("",!0)])};const Ot=e=>{const t=document.createElement("audio");t.src=e,t.play().catch((t=>{window.addEventListener("click",(()=>{Ot(e)}),{once:!0})}))};var Lt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",playSound:Ot});const Qt=D({});Qt.wallpaperPath=((e,t)=>{if(!localStorage.getItem(`config-${e}`))return t;try{return JSON.parse(localStorage.getItem(`config-${e}`))}catch(i){return t}})("wallpaperPath",null);var qt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",values:Qt,setConfig:e=>{Object.entries(e).forEach((([e,t])=>{localStorage.setItem(`config-${e}`,JSON.stringify(t)),Qt[e]=t}))}});const Kt={components:{WelcomePage:J,Window:Ve,Desktop:vt,Taskbar:Wt,ContextMenu:Nt},provide(){return{$wm:ft,$fs:We,$snd:Lt,$cnf:qt,$os:this}},computed:{windowsList:()=>lt.list,contextMenu:()=>rt,isWmStarted:()=>st.started},errorCaptured:e=>(console.error(e),ut({type:"error",content:e.toString(),buttons:["OK"],title:"Unhandled Error",autoClose:!0}),!1),methods:{openContextMenu(...e){this.$refs.contextMenu.open(...e)}},style:({className:e,custom:t})=>[e("os",r({position:"fixed"},it)),t("html, body",{fontFamily:"sans-serif"}),t("*, *:after, &:before",{bixSizing:"content-box",touchAction:"none !important"}),t("*",{touchAction:"none !important",userSelect:"none",fontFamily:"inherit",padding:0,margin:0,listStyle:"none",borderStyle:"solid",borderWidth:"0px",verticalAlign:"baseline",backfaceVisibility:"hidden",color:"inherit",borderColor:"inherit",backgroundColor:"transparent",borderSpacing:0,font:"unset","-webkitOverflowScrolling":"touch","-webkitTapHighlightColor":"rgba(0, 0, 0, 0)",boxSizing:"border-box","&::-moz-focus-inner":{border:0},"&:focus":{outline:"none"}}),t("a, a:hover, a:visited",{textDecoration:"none"})]};Kt.render=function(e,t,i,n,o,s){const a=y("WelcomePage"),r=y("Desktop"),l=y("Taskbar"),d=y("Window"),p=y("ContextMenu");return h(),c("div",{class:u(e.$style.os),onContextmenu:t[0]||(t[0]=$((()=>{}),["prevent"]))},[s.isWmStarted?(h(),c(R,{key:1},[F(r),F(l),(h(!0),c(R,null,z(s.windowsList,(e=>(h(),I(d,{key:e.id,window:e},null,8,["window"])))),128)),F(p,W(N(s.contextMenu)),null,16)],64)):(h(),I(a,{key:0}))],34)};const Gt={components:{Os:Kt}};Gt.render=function(e,t,i,n,o,s){const a=y("Os");return h(),I(a)},(async()=>{await he(),window.$fs=We,window.$app=H(Gt).use(O).mount("#app"),setTimeout((()=>{document.body.classList.remove("loading")}))})();export{Ne as I,je as _,fe as a,Z as b,Ct as c,Re as d,ve as e,xe as f,Le as g,q as h,G as i,Ae as j,wt as k,ut as o,X as p,Y as r,Be as w};
