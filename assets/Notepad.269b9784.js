var e=Object.defineProperty,t=Object.defineProperties,i=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,l=(t,i,a)=>i in t?e(t,i,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[i]=a,s=(e,t)=>{for(var i in t||(t={}))o.call(t,i)&&l(e,i,t[i]);if(a)for(var i of a(t))n.call(t,i)&&l(e,i,t[i]);return e};import{i as r,p as d,r as h}from"./index.309de535.js";import{o as c,c as p,b as f,w as u,q as b,n as x}from"./vendor.957100f5.js";const g=(m=s(s({},r("$wm","$fs")),d({filePath:d.obj(null),wmId:d.any()})),t(m,i({data:()=>({value:"",loading:!1,saving:!1}),created(){this.filePath&&(this.loading=!0,this.$fs.fetchTextFile(this.filePath).then((e=>{this.value=e,this.loading=!1})))},mounted(){this.$refs.textarea.focus()},computed:{isNewFile(){return!this.filePath}},methods:{exit(){this.$wm.closeWindow(this.wmId)},async onSaveClicked(){let e=`Text File ${Date.now()}.txt`,t=this.filePath||`/C:/User/Documents/${e}`;await this.$fs.writeTextFile(t,this.value),this.$wm.openDialog({type:"info",content:"File Saved!",buttons:["OK"]}),this.isNewFile||(await this.$fs.writeTextFile(`C:/User/Desktop/${e}.link`,t),this.exit())}},style:({className:e})=>[e("notepad",{background:"#fff",overflow:"hidden","& > .menubar":{height:"24px",background:h(230,1),borderBottom:`solid 1px ${h(0,.1)}`,"& > *":{display:"inline-block",padding:"0 6px",lineHeight:"24px","&:hover":{background:h(255,1)}},"& > *:not(:last-child)":{borderRight:`solid 1px ${h(0,.1)}`}},"& > textarea":{border:"none",resize:"none",width:"100%",height:"100%",padding:"10px",lineHeight:1.5,"&:focus":{border:"none",outline:"none"}}})]})));var m;const v={class:"menubar"},w=["disabled","placeholder"];g.render=function(e,t,i,a,o,n){return c(),p("div",{class:x(e.$style.notepad)},[f("div",v,[f("span",{onClick:t[0]||(t[0]=(...e)=>n.onSaveClicked&&n.onSaveClicked(...e))}," Save "),f("span",{onClick:t[1]||(t[1]=(...e)=>n.exit&&n.exit(...e))}," Exit ")]),u(f("textarea",{disabled:o.loading,ref:"textarea",placeholder:o.loading?"loading...":null,"onUpdate:modelValue":t[2]||(t[2]=e=>o.value=e)},null,8,w),[[b,o.value]])],2)};export{g as default};
